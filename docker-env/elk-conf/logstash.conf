input {
	kafka {
		bootstrap_servers => "kafka:9092"
		group_id => "logstash"
		topics => ["ipmi-log"]
		auto_offset_reset => "latest"
		codec => "json"
	}
}

filter {
	ruby {
		code => "
			event.set('hex', event.get('STATUS')[0..1])
		"
	}
	if [hex] == '0x0' {
		ruby {
			code => "
				event.set('STATUS', event.get('STATUS').to_s.hex)
			"
		}
	}
	prune {
		blacklist_names => ["hex"]
	}
}

output { 
	stdout { }
}
